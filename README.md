## ğŸ« ìºì¹˜! í‹°ì¼“í•‘ : **ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ì²˜ë¦¬ ê³µì—° ì˜ˆë§¤ ì„œë¹„ìŠ¤**
<p align="center">
  <img src="https://github.com/user-attachments/assets/57572f9b-6c7c-4ffd-aa50-e32c2056341f" width="80%" alt="í‹°ì¼“í•‘ ë°°ê²½ ì´ë¯¸ì§€">
</p>
<br>

## ğŸ‘‹ğŸ» í”„ë¡œì íŠ¸ ì†Œê°œ

<aside>
í‹°ì¼“í•‘ì€ ëŒ€ê·œëª¨ íŠ¸ë˜í”½ì—ë„ ì•ˆì •ì ì¸ ì˜ˆë§¤ê°€ ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” MSA ê¸°ë°˜ì˜ ê³µì—° ì˜ˆë§¤ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
</aside>

<br>
<br>

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ

- **ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ì²˜ë¦¬ë¥¼ ìœ„í•œ ëŒ€ê¸°ì—´ ì‹œìŠ¤í…œ**
    
    ì„œë²„ì˜ ê³¼ë¶€í•˜ ë°©ì§€ë¥¼ ìœ„í•´ ì˜ˆë§¤ ë‹¨ê³„ì—ì„œì˜ ì¸ì›ì„ ì œí•œí•˜ëŠ” `ëŒ€ê¸°ì—´` ì‹œìŠ¤í…œ êµ¬ì¶•
    
    ëŒ€ê·œëª¨ íŠ¸ë˜í”½ì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ êµ¬ì¶•
  
- **DB ë¶€í•˜ ë° ì¡°íšŒ ì†ë„ ê°œì„ **
    
    íŠ¸ë˜í”½ì´ ë§ì€ ì¢Œì„ ì¡°íšŒ ë° ì¸ì¦ ì •ë³´ `Redis` ìºì‹± ë„ì…
    
- **ì‹¤ì‹œê°„ ì¤‘ë³µ ì˜ˆë§¤ ë°©ì§€**
    
    `ì‹¤ì‹œê°„`ìœ¼ë¡œ ì¢Œì„ì„ ì˜ˆë§¤í•  ë•Œ ì¤‘ë³µ ì˜ˆë§¤ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ì¢Œì„ ì„ ì  ì‹œìŠ¤í…œ ë„ì…
    
- **MSA ì„œë¹„ìŠ¤ ê°„ ëŠìŠ¨í•œ ê²°í•©**
    
    `Kafka`ë¥¼ ì´ìš©í•œ ì„œë¹„ìŠ¤ ê°„ ë¹„ë™ê¸° í†µì‹  ë„ì…
    
- **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**
    
    ë¶ˆí•„ìš”í•œ ëŒ€ê¸° ìƒí™©ì„ ë§‰ê¸° ìœ„í•œ ëŒ€ê¸°ì—´ ìš”ì²­ ì„ ì²˜ë¦¬ í•„í„° ë„ì…
    
- **ì½”ë“œ ì¤‘ë³µ ìµœì†Œí™” ë° ì¼ê´€ì„± ìœ ì§€**
    
    `ë©€í‹° ëª¨ë“ˆ` êµ¬ì¡°ì—ì„œ ê³µí†µ ëª¨ë“ˆ ë„ì…
    
- **ë°°í¬ ë° ìš´ì˜**
    
    íš¨ìœ¨ì„±ê³¼ ì¼ê´€ì„±ì„ ìœ„í•´ `Docker` ë° Docker Compose ì‚¬ìš©
    
<br>

## ğŸ› ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

<p align="center">
  <img src="https://github.com/user-attachments/assets/e2c614e9-28b3-4d37-9e2c-8fabeeb2864d" height="90%" width="90%" alt="sa">
</p>

<details>
    <summary><h3>âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ</h3></summary> 
  
<br>  
<div align="center">
<table style="width: 100%; margin: auto; text-align: center;">
    <tr>
        <th style="text-align: center;">ì¹´í…Œê³ ë¦¬</th>
        <th style="text-align: center;">ê¸°ìˆ /ë„êµ¬</th>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Backend</strong></td>
        <td style="text-align: center;">Java 17</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Spring Boot 3.3.4</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">MVC, WebFlux</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Cloud, Security</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Spring Data JPA</td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>DB</strong></td>
        <td style="text-align: center;">PostgreSQL</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Redis</td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Messaging</strong></td>
        <td style="text-align: center;">Kafka</td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Monitoring</strong></td>
        <td style="text-align: center;">Prometheus</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Grafana</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Loki</td>
    </tr>
    <tr>
        <td style="text-align: center;"></td>
        <td style="text-align: center;">Zipkin</td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Infra</strong></td>
        <td style="text-align: center;">Docker</td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Test</strong></td>
        <td style="text-align: center;">JMeter</td>
    </tr>
    <tr>
        <td style="text-align: center;"><strong>Channel</strong></td>
        <td style="text-align: center;">Discord</td>
    </tr>
</table>
</div>
</details>

<br>

## ğŸ“ƒÂ ë‹¤ì´ì–´ê·¸ë¨

### ğŸ§‘ ìœ ì € í”Œë¡œìš°

<div align="center">
<br>  
  
![ticketping_sa-ìœ ì € í”Œë¡œìš° drawio](https://github.com/user-attachments/assets/56de8102-d730-48a0-ae61-de2c844f807d)
</div>

<aside>
  
<details>
    <summary><h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ëŒ€ê¸°ì—´ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h3></summary> 
<br>  
  
![ticketping_sa-í˜ì´ì§€-8 drawio](https://github.com/user-attachments/assets/a2f5074b-441b-457f-b674-38419f20d2d3)

</details>

</aside>

<aside>

<details>
    <summary><h3>ğŸ« ì˜ˆë§¤ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h3></summary> 
<br>  

![ticketping_sa-ì˜ˆë§¤,ê²°ì œ ì‹œí€€ìŠ¤ drawio](https://github.com/user-attachments/assets/a91e25c2-7191-4fb1-b94d-cacdb7074e39)

</details>

</aside>

<aside>

<details>
    <summary><h3>âœï¸ ERD</h3></summary> 
<br>  

![ticketping_sa-ì˜ˆë§¤,ê²°ì œ ì‹œí€€ìŠ¤ drawio](https://github.com/user-attachments/assets/a91e25c2-7191-4fb1-b94d-cacdb7074e39)

</details>

</aside>

<br>

## ğŸ”§ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •


| ì„œë¹„ìŠ¤ | ìš”êµ¬ì‚¬í•­ | ê¸°ìˆ  | ì„ íƒ ì´ìœ  |
| --- | --- | --- | --- |
| ëŒ€ê¸°ì—´ ì„œë¹„ìŠ¤ | ëŒ€ê¸°ì—´ ì§„ì…  ìš”ì²­ | Redis Sorted Set | ë¹ ë¥¸ ì—°ì‚° ì†ë„ì™€ ì‚¬ìš©ì ìš”ì²­ì„ Atomicí•˜ê²Œ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—  |
| ëŒ€ê¸°ì—´ ì„œë¹„ìŠ¤ | ì‘ì—…ì—´ í† í°  ë§Œë£Œ ì´ë²¤íŠ¸ ì²˜ë¦¬ | Redis Keyspace Notifications | ì¡ ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ë¶ˆí•„ìš”í•œ ìì› ì†Œëª¨ë¥¼ ë§‰ê¸° ìœ„í•˜ì—¬ |
| ê³µì—° ì„œë¹„ìŠ¤ | ê³µì—° ì „ì²´ ì¢Œì„ ì¡°íšŒ | Redis String | ì „ì²´ ì¢Œì„ ìƒíƒœ ì¡°íšŒì˜ ê²½ìš° íŠ¸ë˜í”½ì´ ëª°ë¦´ ê²½ìš° DBì— ë¶€í•˜ë¥¼ ì¤„ ìˆ˜ ìˆìŒ â†’ redisì— ìºì‹±í•´ DB ë¶€í•˜ ë°©ì§€ ë° ì¡°íšŒ ì†ë„ ê°œì„  |
| ì˜ˆë§¤ ì„œë¹„ìŠ¤ | ì¢Œì„ ê²°ì œ ê³¼ì • ë™ì•ˆ ì¢Œì„ ì„ ì   | Redis String | ì¢Œì„ì„ ì„ íƒí•˜ê³  ê²°ì œí•˜ê¸° ì°½ì— ë“¤ì–´ê°€ë©´ Redisì— ìºì‹±ëœ ê³µì—° ì¢Œì„ì„ ì˜ˆë§¤ ë¶ˆê°€ ìƒíƒœë¡œ ë³€ê²½ |
| ì˜ˆë§¤ ì„œë¹„ìŠ¤ | ì¢Œì„ ì„ ì  í›„ ì¼ì • ê¸°ê°„ ë‚´ ê²°ì œí•˜ì§€ ì•Šìœ¼ë©´ ì„ ì  ë§Œë£Œ | Redis String (TTL) <br> Redis Keyspace Notifications | RedisëŠ” TTLì´ ìˆëŠ” Stringì„ ë§Œë“¤ê³  Redis Keyspace Notificationsë¥¼ í†µí•´ Stringì´ ë§Œë£Œë˜ë©´ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆìŒ |
| ê²°ì œ ì„œë¹„ìŠ¤ | ê²°ì œ ë°ì´í„° ì²˜ë¦¬ | Stripe (PG) ì—°ë™ | ê°œì¸ì˜ ë¯¼ê° ì •ë³´ëŠ” DBì—ì„œ ì·¨ê¸‰í•˜ì§€ ì•Šê³  Stripeì— ì—­í• ì„ ì´ì „í•˜ì—¬ ê²°ì œì— í•„ìš”í•œ ìµœì†Œí•œì˜ ë°ì´í„°ë§Œ ì €ì¥í•˜ì—¬ ë¯¼ê° ì •ë³´ ìœ ì¶œì˜ ìœ„í—˜ë„ë¥¼ ë‚®ì¶¤. |
| ê²°ì œ ì„œë¹„ìŠ¤ | ê²°ì œ ì„±ê³µ ì‹œ ì˜ˆë§¤ ì„œë¹„ìŠ¤ì—ì„œ ì˜ˆë§¤ ìƒíƒœë¥¼ `ì˜ˆë§¤ ì™„ë£Œ`ë¡œ ë³€ê²½. | Kafka | - ë¹„ë™ê¸° í†µì‹  <br> ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ìƒí™©ì˜ ê²½ìš° ë™ê¸°ë¡œ ì²˜ë¦¬í•  ê²½ìš° ì²˜ë¦¬ ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸ì— kafkaë¡œ ì´ë²¤íŠ¸ í•¸ë“¤ë§í•˜ì—¬ ì²˜ë¦¬ ì†ë„ í–¥ìƒ |

<br>

## âš½ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

  <details>
    <summary> [ëŒ€ê¸°ì—´] ëŒ€ê¸°ì—´ ì§„ì… ë™ì‹œì„± ë¬¸ì œ </summary> 
    
  - ë¬¸ì œ: ì‘ì—…ì—´ ìµœëŒ€ í¬ê¸° ì´ìƒì˜ í† í°ì´ ì €ì¥ë˜ëŠ” ë¬¸ì œ
        
        (ê¸°ëŒ“ê°’: 100, ê²°ê³¼ê°’: 208)
        
    <img width="422" alt="á„ƒá…¢á„€á…µá„‹á…§á†¯á„á…³á„…á…¥á„‡á…³á†¯á„‰á…²á„á…µá†¼1" src="https://github.com/user-attachments/assets/0a0fd99c-2c40-4003-bcbd-3428bd346fde">
        
    
- ì›ì¸:  ì‘ì—…ì—´ì˜ í† í° ì¹´ìš´í„° ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë¶„ê¸° ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì—ì„œ, ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì¡°ê±´ì„ ë§Œì¡±í•˜ê²Œ ë˜ì–´ max sizeì´ìƒì˜ í† í°ì´ ì €ì¥ë¨.
    
    
        public GeneralQueueTokenResponse enterWaitingQueue(String userId, String performanceId) {
                // ì‘ì—…ì—´ ì¸ì› ì—¬ìœ  í™•ì¸
                AvailableSlots availableSlots = workingQueueRepository.countAvailableSlots(CountAvailableSlotsCommand.create(performanceId));
                if (availableSlots.isLimited()) {
                    return getWaitingTokenResponse(userId, performanceId);
                }
                return getWorkingTokenResponse(userId, performanceId);
            }
        
    

- í•´ê²°: Redisì˜ ì—°ì‚°ë“¤ì„ í•˜ë‚˜ì˜ íŠ¸ë™ì­ì…˜ìœ¼ë¡œ ë¬¶ì–´ì„œ ìˆ˜í–‰ ê°€ëŠ¥í•œ Lua Scriptë¡œ ë³€ê²½í•˜ì—¬ í•´ê²°
    
    <img width="424" alt="á„ƒá…¢á„€á…µá„‹á…§á†¯á„á…³á„…á…¥á„‡á…³á†¯á„‰á…²á„á…µá†¼2" src="https://github.com/user-attachments/assets/d6fddd5e-fc1f-47ba-89c1-d6cc5ad66921">
        
  
  </details>  

  <details>
    <summary>[ì¢Œì„ ìºì‹±] Redis @classë¡œ ì¸í•´ ë‹¤ë¥¸ ì„œë²„ì—ì„œ ìºì‹œë¥¼ ì½ì§€ ëª»í•˜ëŠ” ë¬¸ì œ í•´ê²°</summary>
    
  - ë¬¸ì œ
        - Redisì— ì¢Œì„ ì •ë³´ ê°’ì„ ì €ì¥í•  ë•Œ @classê°€ í•¨ê»˜ ì €ì¥ë˜ì–´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ì„œ ì½ì–´ì˜¤ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•¨
  - ì›ì¸
        - RedisConfigurationì„ ë§Œë“¤ ë•Œ, `GenericJackson2JsonRedisSerializer()` ë¥¼ ì‚¬ìš©í•˜ë©´ @class ì •ë³´ê°€ í•¨ê»˜ ì €ì¥
        
    ![á„Œá…ªá„‰á…¥á†¨á„á…¢á„‰á…µá†¼á„á…³á„…á…¥á„‡á…³á†¯á„‰á…²á„á…µá†¼1](https://github.com/user-attachments/assets/763ec8ae-5e17-4838-af19-2109a9890871)
        
        
        @Bean
        public RedisTemplate<String, Object> redisTemplate() {
            RedisTemplate<String, Object> template = new RedisTemplate<>();
            template.setConnectionFactory(redisConnectionFactory());
        
            template.setKeySerializer(new GenericJackson2JsonRedisSerializer());
            template.setValueSerializer(new GenericJackson2JsonRedisSerializer());
        
            return template;
        }
        
        
  - í•´ê²°
        - RedisConfiguration ìƒì„±ì‹œ Serializerì— @classë¥¼ ì €ì¥í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ì—¬ í•´ê²°
        
    ![á„Œá…ªá„‰á…¥á†¨á„á…¢á„‰á…µá†¼á„á…³á„…á…¥á„‡á…³á†¯á„‰á…²á„á…µá†¼2](https://github.com/user-attachments/assets/f6633e12-cea9-4ffb-8e01-a554c3f53440)
        
        
        @Bean
        public RedisTemplate<String, Object> redisTemplate() {
            RedisTemplate<String, Object> template = new RedisTemplate<>();
            template.setConnectionFactory(redisConnectionFactory());
        
            ObjectMapper objectMapper = new ObjectMapper();
            objectMapper.deactivateDefaultTyping(); // @class ì œê±°
        
            // Jackson2JsonRedisSerializer ì„¤ì •
            Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<>(objectMapper, Object.class);
        
            template.setKeySerializer(new StringRedisSerializer());
            template.setValueSerializer(serializer);
            template.setHashKeySerializer(new StringRedisSerializer());
            template.setHashValueSerializer(serializer);
        
            return template;
        }
        
  </details>

  <br>
  
## ğŸ™‹ğŸ»Â CONTRIBUTORS
<div align="center">
<table style="width: 100%">
    <tr>
        <th style="text-align: center;">íŒ€ì›</th>
        <th style="text-align: center;">ë‹´ë‹¹</th>
        <th style="text-align: center;">ê¹ƒí—ˆë¸Œ ë§í¬</th>
    </tr>
    <tr>
        <td align="center"><img src="https://avatars.githubusercontent.com/rivertw777" width="100px;" alt=""/><br /><sub><b>ê°•íƒœì›</b></sub></a></td>
        <td>
          - ëŒ€ê¸°ì—´ ì„œë¹„ìŠ¤ ê°œë°œ <br>
          - ê²°ì œ ì„œë¹„ìŠ¤ ê°œë°œ <br>
          - ê²Œì´íŠ¸ì›¨ì´ ì˜ˆë§¤ API ì„ ì²˜ë¦¬ í•„í„° ê°œë°œ <br>
          - ê³µí†µ ëª¨ë“ˆ ê´€ë¦¬ <br>
          - Redis ì„¤ì •, í´ëŸ¬ìŠ¤í„° êµ¬ì¶• <br>
          - Kafka ì„¤ì • <br>
        </td>
        <td align="center"><a href="https://github.com/rivertw777">GitHub</a></td>
    </tr>
    <tr>
        <td align="center"><img src="https://avatars.githubusercontent.com/mii2026" width="100px;" alt=""/><br /><sub><b>ê¹€ì§€í¬</b></sub></a></td>
        <td>
          - íšŒì›, ì¸ì¦ ì„œë¹„ìŠ¤ ê°œë°œ <br>
          - ê³µì—° ì„œë¹„ìŠ¤ ê°œë°œ <br>
          - ì£¼ë¬¸ ì„œë¹„ìŠ¤ ê°œë°œ <br>
          - ê²Œì´íŠ¸ì›¨ì´ JWT ì¸ì¦ í•„í„° ê°œë°œ <br>
          - ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶• <br>
        </td>
        <td align="center"><a href="https://github.com/mii2026">GitHub</a></td>
    </tr>
</table>
</div>
